	LIST	P=PIC16F84A
	INCLUDE	"P16F84A.INC"
		
	__CONFIG    _HS_OSC&_WDT_OFF

CNT1	EQU	    0CH
CNT2	EQU	    0DH
CNT3	EQU	    0EH
LED		EQU		0FH

	ORG	    0H

MAIN	
	BSF	    STATUS , RP0
	CLRF	TRISB
	BCF	    STATUS , RP0

	MOVLW	1H
	MOVWF	LED
	MOVWF	PORTB
	CALL	TIME125M
MAINLP1
	BCF 	STATUS, C
	RLF		LED
	MOVF	LED, W
	MOVWF	PORTB
	CALL 	TIME125M
	BTFSS	LED, 7
	GOTO 	MAINLP1
	CALL	TIME125M
MAINLP2
	BCF		STATUS, C
	RRF		LED
	MOVF	LED, W
	MOVWF	PORTB
	CALL 	TIME125M
	BTFSS	LED, 0
	GOTO 	MAINLP2
	CALL	TIME125M
	GOTO 	MAINLP1
	
;50us(250c*0.2us)
TIME50U						
	MOVLW	    052H	; 1c 52H = 82		
	MOVWF	    CNT1	; 1c
	NOP					; 1c
	NOP					; 1c
	NOP					; 1c
LOOP1
	DECFSZ	    CNT1,F	; 1*(82-1)+2*1 = 83
	GOTO	    LOOP1	; 2*(82-2) = 160
	RETURN				; 2c

;5ms(25000*0.2us)	
TIME5M
	MOVLW	062H 		; 1c 62H = 98
	MOVWF 	CNT2		; 1c
	NOP					; 1c
	NOP					; 1c
	NOP					; 1c
	NOP					; 1c
	NOP					; 1c
	NOP					; 1c
	NOP					; 1c
LOOP2
	CALL 	TIME50U		; (2+250)*98 = 24696
	DECFSZ	CNT2, F		; 1*(98-1)+2*1 = 99
	GOTO	LOOP2		; 2*(98-1) = 194
	RETURN				; 2c

;125ms(25*5ms)
TIME125M
	MOVLW	019H		; 19H = 25
	MOVWF	CNT3
LOOP3
	CALL	TIME5M
	DECFSZ	CNT3, F
	GOTO 	LOOP3
	RETURN

	END